{"version":3,"sources":["webpack:///./src/pages/components/Matrix.js","webpack:///./node_modules/react-google-charts/dist/index.esm.js","webpack:///./src/pages/index.js","webpack:///./node_modules/react-load-script/lib/index.js","webpack:///./src/pages/components/Result.js"],"names":["Matrix","data","Object","keys","map","col","i","key","row","_extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","_assign","assign","t","s","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","chartDefaultProps","graph_id","legend_toggle","graphID","options","colors","rows","columns","diffdata","chartEvents","legendToggle","chartActions","getChartWrapper","chartWrapper","google","getChartEditor","className","style","formatters","spreadSheetUrl","spreadSheetQueryParameters","headers","gid","rootProps","chartWrapperParams","controls","render","toolbarItems","toolbarID","_super","GoogleChartLoader","_this","handleGoogleChartsLoaderScriptLoaded","windowGoogleCharts","_a","props","version","chartVersion","packages","chartPackages","language","chartLanguage","mapsApiKey","onLoad","charts","load","setOnLoadCallback","shouldComponentUpdate","nextProps","onError","url","windowWithGoogle","window","uniqueID","generateUniqueID","DEFAULT_CHART_COLORS","loadDataTableFromSpreadSheet","googleViz","urlParams","undefined","queryString","query","encodeURIComponent","sheet","access_token","urlToSpreadSheet","visualization","Query","send","response","isError","getMessage","getDetailedMessage","getDataTable","Provider","Consumer","children","context","GoogleChartDataTableInner","state","hiddenColumns","listenToLegendToggle","googleChartWrapper","events","addListener","selection","getChart","getSelection","dataTable","columnIndex","column","columnID","getColumnID","includes","setState","filter","colID","slice","concat","applyFormatters","_i","formatters_1","formatter","type","vizFormatter","ArrowFormat","format","BarFormat","ColorFormat","ranges_1","ranges","range","addRange","DateFormat","NumberFormat","PatternFormat","getColumnId","getColumnLabel","draw","chartType","_b","chartDiff","oldData","newData","columnCount","previousColumnLabel","previousColumnID","previousColumnType","chart","_c","arrayToDataTable","old","new","computeDiff","isArray","DataTable","getNumberOfColumns","getColumnType","removeColumn","addColumn","id","getChartType","clearChart","setChartType","setOptions","setDataTable","googleChartDashboard","grayOutHiddenColumns","from","dontcare","onResize","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","removeAllListeners","componentDidUpdate","GoogleChartDataTable","GoogleChartEvents","listenToEvents","_loop_1","event_1","eventName","callback","args","eventArgs","chartEvents_1","propsFromContext","controlCounter","GoogleChart","googleChartControls","googleChartEditor","isReady","dashboard_ref","toolbar_ref","getGraphID","instanceGraphID","getControlID","index","addControls","control","controlIDMaybe","controlID","controlType","controlOptions","controlWrapperParams","controlProp","ControlWrapper","containerId","bind","chartControl","controlEvents","_loop_2","removeListener","controlWrapper","controlEvents_1","googleChartControls_1","renderChart","width","height","divStyle","renderControl","getContainerId","renderToolBar","ref","chartConfig","ChartWrapper","Dashboard","drawToolbar","current","chartEditor","ChartEditor","setControlType","nextState","renderToolbar","controlPosition","Chart","_isMounted","loadingStatus","isFullyLoaded","onSuccess","id_1","setInterval","clearInterval","loader","errorElement","defaultProps","correlation","x","xMean","reduce","acc","el","yMean","numerator","xDSquaredSum","yDSquaredSum","xd","yd","Home","useState","assets","setAssets","correlations","setCorrelations","covariances","setCovariances","setData","weights","setWeights","currentWeight","setCurrentWeight","useEffect","newCorrelations","j","symbol","returns","newCovariances","stdevs","covariancesFromCorrelations","asset","stdev","arCovars","k","k2","meanReturns","a","r","portfolio","PortfolioAllocation","meanVarianceEfficientFrontierPortfolios","coords","forEach","href","AssetList","onAdd","found","newAssets","onRemove","Result","coord","hAxis","title","vAxis","defineProperty","exports","obj","_createClass","defineProperties","target","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","_react2","__esModule","default","_propTypes","Script","_React$Component","instance","_classCallCheck","self","ReferenceError","_possibleConstructorReturn","getPrototypeOf","scriptLoaderId","idCount","subClass","superClass","_inherits","_props","loadedScripts","erroredScripts","scriptObservers","_defineProperty","createScript","observers","_this2","_props2","onCreate","attributes","script","document","createElement","prop","setAttribute","src","hasAttribute","async","callObserverFuncAndRemoveObserver","shouldRemoveObserver","onload","observer","onerror","appendChild","Component","propTypes","PropTypes","object","func","isRequired","string","module","decimalFormatter","Intl","maximumFractionDigits","minimumFractionDigits","risk","setRisk","total","amount","close","w","Î©","l","sum"],"mappings":"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","file":"component---src-pages-index-js-700a510bf77f9d765ded.js","sourcesContent":["import React from 'react'\n\nexport default function Matrix({ data }) {\n  return (\n    <table>\n      <thead>\n        <tr>\n          <th>-</th>\n          {Object.keys(data || {}).map((col, i) => (\n            <th key={`${data}-${i}`}>{col}</th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {Object.keys(data || {}).map((col, i) => (\n          <tr key={`${data}-${i}`}>\n            <th>{col}</th>\n            {Object.keys(data[col]).map((row, i) => (\n              <td key={`${row}-${i}`}>{data[col][row]}</td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  )\n}\n","import { createElement, Component, createRef, Fragment, createContext } from 'react';\nimport Script from 'react-load-script';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nvar chartDefaultProps = {\n  graph_id: null,\n  legend_toggle: false,\n  graphID: null,\n  options: {\n    colors: null\n  },\n  data: null,\n  rows: null,\n  columns: null,\n  diffdata: null,\n  chartEvents: null,\n  legendToggle: false,\n  chartActions: null,\n  getChartWrapper: function getChartWrapper(chartWrapper, google) {},\n  getChartEditor: null,\n  className: \"\",\n  style: {},\n  formatters: null,\n  spreadSheetUrl: null,\n  spreadSheetQueryParameters: {\n    headers: 1,\n    gid: 1\n  },\n  rootProps: {},\n  chartWrapperParams: {},\n  controls: null,\n  render: null,\n  toolbarItems: null,\n  toolbarID: null\n};\n\nvar GoogleChartLoader = function (_super) {\n  __extends(GoogleChartLoader, _super);\n\n  function GoogleChartLoader() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handleGoogleChartsLoaderScriptLoaded = function (windowGoogleCharts) {\n      var _a = _this.props,\n          version = _a.chartVersion,\n          packages = _a.chartPackages,\n          language = _a.chartLanguage,\n          mapsApiKey = _a.mapsApiKey,\n          onLoad = _a.onLoad;\n      windowGoogleCharts.charts.load(version || \"current\", {\n        packages: packages || [\"corechart\", \"controls\"],\n        language: language || \"en\",\n        mapsApiKey: mapsApiKey\n      });\n      windowGoogleCharts.charts.setOnLoadCallback(function () {\n        onLoad(windowGoogleCharts);\n      });\n    };\n\n    return _this;\n  }\n\n  GoogleChartLoader.prototype.shouldComponentUpdate = function (nextProps) {\n    return nextProps.chartPackages === this.props.chartPackages;\n  };\n\n  GoogleChartLoader.prototype.render = function () {\n    var _this = this;\n\n    var onError = this.props.onError;\n    return createElement(Script, {\n      url: \"https://www.gstatic.com/charts/loader.js\",\n      onError: onError,\n      onLoad: function onLoad() {\n        var windowWithGoogle = window;\n\n        if (windowWithGoogle.google) {\n          _this.handleGoogleChartsLoaderScriptLoaded(windowWithGoogle.google);\n        }\n      }\n    });\n  };\n\n  return GoogleChartLoader;\n}(Component);\n\nvar uniqueID = 0;\n\nvar generateUniqueID = function generateUniqueID() {\n  uniqueID += 1;\n  return \"reactgooglegraph-\" + uniqueID;\n};\n\nvar DEFAULT_CHART_COLORS = [\"#3366CC\", \"#DC3912\", \"#FF9900\", \"#109618\", \"#990099\", \"#3B3EAC\", \"#0099C6\", \"#DD4477\", \"#66AA00\", \"#B82E2E\", \"#316395\", \"#994499\", \"#22AA99\", \"#AAAA11\", \"#6633CC\", \"#E67300\", \"#8B0707\", \"#329262\", \"#5574A6\", \"#3B3EAC\"];\nvar _this = undefined;\n\nvar loadDataTableFromSpreadSheet = function loadDataTableFromSpreadSheet(googleViz, spreadSheetUrl, urlParams) {\n  if (urlParams === void 0) {\n    urlParams = {};\n  }\n\n  return __awaiter(_this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      return [2, new Promise(function (resolve, reject) {\n        var headers = \"\" + (urlParams.headers ? \"headers=\" + urlParams.headers : \"headers=0\");\n        var queryString = \"\" + (urlParams.query ? \"&tq=\" + encodeURIComponent(urlParams.query) : \"\");\n        var gid = \"\" + (urlParams.gid ? \"&gid=\" + urlParams.gid : \"\");\n        var sheet = \"\" + (urlParams.sheet ? \"&sheet=\" + urlParams.sheet : \"\");\n        var access_token = \"\" + (urlParams.access_token ? \"&access_token=\" + urlParams.access_token : \"\");\n        var urlQueryString = \"\" + headers + gid + sheet + queryString + access_token;\n        var urlToSpreadSheet = spreadSheetUrl + \"/gviz/tq?\" + urlQueryString;\n        var query = new googleViz.visualization.Query(urlToSpreadSheet);\n        query.send(function (response) {\n          if (response.isError()) {\n            reject(\"Error in query:  \" + response.getMessage() + \" \" + response.getDetailedMessage());\n          } else {\n            resolve(response.getDataTable());\n          }\n        });\n      })];\n    });\n  });\n};\n\nvar _a = createContext(chartDefaultProps),\n    Provider = _a.Provider,\n    Consumer = _a.Consumer;\n\nvar ContextProvider = function ContextProvider(_a) {\n  var children = _a.children,\n      value = _a.value;\n  return createElement(Provider, {\n    value: value\n  }, children);\n};\n\nvar ContextConsumer = function ContextConsumer(_a) {\n  var render = _a.render;\n  return createElement(Consumer, null, function (context) {\n    return render(context);\n  });\n};\n\nvar GRAY_COLOR = \"#CCCCCC\";\n\nvar GoogleChartDataTableInner = function (_super) {\n  __extends(GoogleChartDataTableInner, _super);\n\n  function GoogleChartDataTableInner() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hiddenColumns: []\n    };\n\n    _this.listenToLegendToggle = function () {\n      var _a = _this.props,\n          google = _a.google,\n          googleChartWrapper = _a.googleChartWrapper;\n      google.visualization.events.addListener(googleChartWrapper, \"select\", function () {\n        var chart = googleChartWrapper.getChart();\n        var selection = chart.getSelection();\n        var dataTable = googleChartWrapper.getDataTable();\n\n        if (selection.length === 0 || selection[0].row !== null || dataTable === null) {\n          return;\n        }\n\n        var columnIndex = selection[0].column;\n\n        var columnID = _this.getColumnID(dataTable, columnIndex);\n\n        if (_this.state.hiddenColumns.includes(columnID)) {\n          _this.setState(function (state) {\n            return _assign({}, state, {\n              hiddenColumns: state.hiddenColumns.filter(function (colID) {\n                return colID !== columnID;\n              }).slice()\n            });\n          });\n        } else {\n          _this.setState(function (state) {\n            return _assign({}, state, {\n              hiddenColumns: state.hiddenColumns.concat([columnID])\n            });\n          });\n        }\n      });\n    };\n\n    _this.applyFormatters = function (dataTable, formatters) {\n      var google = _this.props.google;\n\n      for (var _i = 0, formatters_1 = formatters; _i < formatters_1.length; _i++) {\n        var formatter = formatters_1[_i];\n\n        switch (formatter.type) {\n          case \"ArrowFormat\":\n            {\n              var vizFormatter = new google.visualization.ArrowFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"BarFormat\":\n            {\n              var vizFormatter = new google.visualization.BarFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"ColorFormat\":\n            {\n              var vizFormatter = new google.visualization.ColorFormat(formatter.options);\n              var ranges = formatter.ranges;\n\n              for (var _a = 0, ranges_1 = ranges; _a < ranges_1.length; _a++) {\n                var range = ranges_1[_a];\n                vizFormatter.addRange.apply(vizFormatter, range);\n              }\n\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"DateFormat\":\n            {\n              var vizFormatter = new google.visualization.DateFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"NumberFormat\":\n            {\n              var vizFormatter = new google.visualization.NumberFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"PatternFormat\":\n            {\n              var vizFormatter = new google.visualization.PatternFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n        }\n      }\n    };\n\n    _this.getColumnID = function (dataTable, columnIndex) {\n      return dataTable.getColumnId(columnIndex) || dataTable.getColumnLabel(columnIndex);\n    };\n\n    _this.draw = function (_a) {\n      var data = _a.data,\n          diffdata = _a.diffdata,\n          rows = _a.rows,\n          columns = _a.columns,\n          options = _a.options,\n          legend_toggle = _a.legend_toggle,\n          legendToggle = _a.legendToggle,\n          chartType = _a.chartType,\n          formatters = _a.formatters,\n          spreadSheetUrl = _a.spreadSheetUrl,\n          spreadSheetQueryParameters = _a.spreadSheetQueryParameters;\n      return __awaiter(_this, void 0, void 0, function () {\n        var _b, google, googleChartWrapper, dataTable, chartDiff, oldData, newData, columnCount, i, columnID, previousColumnLabel, previousColumnID, previousColumnType, chart;\n\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              _b = this.props, google = _b.google, googleChartWrapper = _b.googleChartWrapper;\n              chartDiff = null;\n\n              if (diffdata !== null) {\n                oldData = google.visualization.arrayToDataTable(diffdata.old);\n                newData = google.visualization.arrayToDataTable(diffdata.new);\n                chartDiff = google.visualization[chartType].prototype.computeDiff(oldData, newData);\n              }\n\n              if (!(data !== null)) return [3, 1];\n\n              if (Array.isArray(data)) {\n                dataTable = google.visualization.arrayToDataTable(data);\n              } else {\n                dataTable = new google.visualization.DataTable(data);\n              }\n\n              return [3, 5];\n\n            case 1:\n              if (!(rows !== null && columns !== null)) return [3, 2];\n              dataTable = google.visualization.arrayToDataTable([columns].concat(rows));\n              return [3, 5];\n\n            case 2:\n              if (!(spreadSheetUrl !== null)) return [3, 4];\n              return [4, loadDataTableFromSpreadSheet(google, spreadSheetUrl, spreadSheetQueryParameters)];\n\n            case 3:\n              dataTable = _c.sent();\n              return [3, 5];\n\n            case 4:\n              dataTable = google.visualization.arrayToDataTable([]);\n              _c.label = 5;\n\n            case 5:\n              columnCount = dataTable.getNumberOfColumns();\n\n              for (i = 0; i < columnCount; i += 1) {\n                columnID = this.getColumnID(dataTable, i);\n\n                if (this.state.hiddenColumns.includes(columnID)) {\n                  previousColumnLabel = dataTable.getColumnLabel(i);\n                  previousColumnID = dataTable.getColumnId(i);\n                  previousColumnType = dataTable.getColumnType(i);\n                  dataTable.removeColumn(i);\n                  dataTable.addColumn({\n                    label: previousColumnLabel,\n                    id: previousColumnID,\n                    type: previousColumnType\n                  });\n                }\n              }\n\n              chart = googleChartWrapper.getChart();\n\n              if (googleChartWrapper.getChartType() === \"Timeline\") {\n                chart && chart.clearChart();\n              }\n\n              googleChartWrapper.setChartType(chartType);\n              googleChartWrapper.setOptions(options);\n              googleChartWrapper.setDataTable(dataTable);\n              googleChartWrapper.draw();\n\n              if (this.props.googleChartDashboard !== null) {\n                this.props.googleChartDashboard.draw(dataTable);\n              }\n\n              if (chartDiff !== null) {\n                googleChartWrapper.setDataTable(chartDiff);\n                googleChartWrapper.draw();\n              }\n\n              if (formatters !== null) {\n                this.applyFormatters(dataTable, formatters);\n                googleChartWrapper.setDataTable(dataTable);\n                googleChartWrapper.draw();\n              }\n\n              if (legendToggle === true || legend_toggle === true) {\n                this.grayOutHiddenColumns({\n                  options: options\n                });\n              }\n\n              return [2];\n          }\n        });\n      });\n    };\n\n    _this.grayOutHiddenColumns = function (_a) {\n      var options = _a.options;\n      var googleChartWrapper = _this.props.googleChartWrapper;\n      var dataTable = googleChartWrapper.getDataTable();\n      if (dataTable === null) return;\n      var columnCount = dataTable.getNumberOfColumns();\n      var hasAHiddenColumn = _this.state.hiddenColumns.length > 0;\n      if (hasAHiddenColumn === false) return;\n      var colors = Array.from({\n        length: columnCount - 1\n      }).map(function (dontcare, i) {\n        var columnID = _this.getColumnID(dataTable, i + 1);\n\n        if (_this.state.hiddenColumns.includes(columnID)) {\n          return GRAY_COLOR;\n        } else if (typeof options.colors !== \"undefined\" && options.colors !== null) {\n          return options.colors[i];\n        } else {\n          return DEFAULT_CHART_COLORS[i];\n        }\n      });\n      googleChartWrapper.setOptions(_assign({}, options, {\n        colors: colors\n      }));\n      googleChartWrapper.draw();\n    };\n\n    _this.onResize = function () {\n      var googleChartWrapper = _this.props.googleChartWrapper;\n      googleChartWrapper.draw();\n    };\n\n    return _this;\n  }\n\n  GoogleChartDataTableInner.prototype.componentDidMount = function () {\n    this.draw(this.props);\n    window.addEventListener(\"resize\", this.onResize);\n\n    if (this.props.legend_toggle || this.props.legendToggle) {\n      this.listenToLegendToggle();\n    }\n  };\n\n  GoogleChartDataTableInner.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        google = _a.google,\n        googleChartWrapper = _a.googleChartWrapper;\n    window.removeEventListener(\"resize\", this.onResize);\n    google.visualization.events.removeAllListeners(googleChartWrapper);\n\n    if (googleChartWrapper.getChartType() === \"Timeline\") {\n      googleChartWrapper.getChart() && googleChartWrapper.getChart().clearChart();\n    }\n  };\n\n  GoogleChartDataTableInner.prototype.componentDidUpdate = function () {\n    this.draw(this.props);\n  };\n\n  GoogleChartDataTableInner.prototype.render = function () {\n    return null;\n  };\n\n  return GoogleChartDataTableInner;\n}(Component);\n\nvar GoogleChartDataTable = function (_super) {\n  __extends(GoogleChartDataTable, _super);\n\n  function GoogleChartDataTable() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GoogleChartDataTable.prototype.componentDidMount = function () {};\n\n  GoogleChartDataTable.prototype.componentWillUnmount = function () {};\n\n  GoogleChartDataTable.prototype.shouldComponentUpdate = function () {\n    return false;\n  };\n\n  GoogleChartDataTable.prototype.render = function () {\n    var _a = this.props,\n        google = _a.google,\n        googleChartWrapper = _a.googleChartWrapper,\n        googleChartDashboard = _a.googleChartDashboard;\n    return createElement(ContextConsumer, {\n      render: function render(props) {\n        return createElement(GoogleChartDataTableInner, _assign({}, props, {\n          google: google,\n          googleChartWrapper: googleChartWrapper,\n          googleChartDashboard: googleChartDashboard\n        }));\n      }\n    });\n  };\n\n  return GoogleChartDataTable;\n}(Component);\n\nvar GoogleChartEvents = function (_super) {\n  __extends(GoogleChartEvents, _super);\n\n  function GoogleChartEvents() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GoogleChartEvents.prototype.shouldComponentUpdate = function () {\n    return false;\n  };\n\n  GoogleChartEvents.prototype.listenToEvents = function (_a) {\n    var _this = this;\n\n    var chartEvents = _a.chartEvents,\n        google = _a.google,\n        googleChartWrapper = _a.googleChartWrapper;\n\n    if (chartEvents === null) {\n      return;\n    }\n\n    google.visualization.events.removeAllListeners(googleChartWrapper);\n\n    var _loop_1 = function _loop_1(event_1) {\n      var eventName = event_1.eventName,\n          callback = event_1.callback;\n      google.visualization.events.addListener(googleChartWrapper, eventName, function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        callback({\n          chartWrapper: googleChartWrapper,\n          props: _this.props,\n          google: google,\n          eventArgs: args\n        });\n      });\n    };\n\n    for (var _i = 0, chartEvents_1 = chartEvents; _i < chartEvents_1.length; _i++) {\n      var event_1 = chartEvents_1[_i];\n\n      _loop_1(event_1);\n    }\n  };\n\n  GoogleChartEvents.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        google = _a.google,\n        googleChartWrapper = _a.googleChartWrapper;\n    return createElement(ContextConsumer, {\n      render: function render(propsFromContext) {\n        _this.listenToEvents({\n          chartEvents: propsFromContext.chartEvents || null,\n          google: google,\n          googleChartWrapper: googleChartWrapper\n        });\n\n        return null;\n      }\n    });\n  };\n\n  return GoogleChartEvents;\n}(Component);\n\nvar controlCounter = 0;\n\nvar GoogleChart = function (_super) {\n  __extends(GoogleChart, _super);\n\n  function GoogleChart() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      googleChartWrapper: null,\n      googleChartDashboard: null,\n      googleChartControls: null,\n      googleChartEditor: null,\n      isReady: false\n    };\n    _this.graphID = null;\n    _this.dashboard_ref = createRef();\n    _this.toolbar_ref = createRef();\n\n    _this.getGraphID = function () {\n      var _a = _this.props,\n          graphID = _a.graphID,\n          graph_id = _a.graph_id;\n      var instanceGraphID;\n\n      if (graphID === null && graph_id === null) {\n        if (_this.graphID === null) {\n          instanceGraphID = generateUniqueID();\n        } else {\n          instanceGraphID = _this.graphID;\n        }\n      } else if (graphID !== null && graph_id === null) {\n        instanceGraphID = graphID;\n      } else if (graph_id !== null && graphID === null) {\n        instanceGraphID = graph_id;\n      } else {\n        instanceGraphID = graphID;\n      }\n\n      _this.graphID = instanceGraphID;\n      return _this.graphID;\n    };\n\n    _this.getControlID = function (id, index) {\n      controlCounter += 1;\n      var controlID;\n\n      if (typeof id === \"undefined\") {\n        controlID = \"googlechart-control-\" + index + \"-\" + controlCounter;\n      } else {\n        controlID = id;\n      }\n\n      return controlID;\n    };\n\n    _this.addControls = function (googleChartWrapper, googleChartDashboard) {\n      var _a = _this.props,\n          google = _a.google,\n          controls = _a.controls;\n      var googleChartControls = controls === null ? null : controls.map(function (control, i) {\n        var controlIDMaybe = control.controlID,\n            controlType = control.controlType,\n            controlOptions = control.options,\n            controlWrapperParams = control.controlWrapperParams;\n\n        var controlID = _this.getControlID(controlIDMaybe, i);\n\n        return {\n          controlProp: control,\n          control: new google.visualization.ControlWrapper(_assign({\n            containerId: controlID,\n            controlType: controlType,\n            options: controlOptions\n          }, controlWrapperParams))\n        };\n      });\n\n      if (googleChartControls === null) {\n        return null;\n      }\n\n      googleChartDashboard.bind(googleChartControls.map(function (_a) {\n        var control = _a.control;\n        return control;\n      }), googleChartWrapper);\n\n      var _loop_1 = function _loop_1(chartControl) {\n        var control = chartControl.control,\n            controlProp = chartControl.controlProp;\n        var _a = controlProp.controlEvents,\n            controlEvents = _a === void 0 ? [] : _a;\n\n        var _loop_2 = function _loop_2(event_1) {\n          var callback = event_1.callback,\n              eventName = event_1.eventName;\n          google.visualization.events.removeListener(control, eventName, callback);\n          google.visualization.events.addListener(control, eventName, function () {\n            var args = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              args[_i] = arguments[_i];\n            }\n\n            callback({\n              chartWrapper: googleChartWrapper,\n              controlWrapper: control,\n              props: _this.props,\n              google: google,\n              eventArgs: args\n            });\n          });\n        };\n\n        for (var _i = 0, controlEvents_1 = controlEvents; _i < controlEvents_1.length; _i++) {\n          var event_1 = controlEvents_1[_i];\n\n          _loop_2(event_1);\n        }\n      };\n\n      for (var _i = 0, googleChartControls_1 = googleChartControls; _i < googleChartControls_1.length; _i++) {\n        var chartControl = googleChartControls_1[_i];\n\n        _loop_1(chartControl);\n      }\n\n      return googleChartControls;\n    };\n\n    _this.renderChart = function () {\n      var _a = _this.props,\n          width = _a.width,\n          height = _a.height,\n          options = _a.options,\n          style = _a.style,\n          className = _a.className,\n          rootProps = _a.rootProps,\n          google = _a.google;\n\n      var divStyle = _assign({\n        height: height || options && options.height,\n        width: width || options && options.width\n      }, style);\n\n      return createElement(\"div\", _assign({\n        id: _this.getGraphID(),\n        style: divStyle,\n        className: className\n      }, rootProps), _this.state.isReady && _this.state.googleChartWrapper !== null ? createElement(Fragment, null, createElement(GoogleChartDataTable, {\n        googleChartWrapper: _this.state.googleChartWrapper,\n        google: google,\n        googleChartDashboard: _this.state.googleChartDashboard\n      }), createElement(GoogleChartEvents, {\n        googleChartWrapper: _this.state.googleChartWrapper,\n        google: google\n      })) : null);\n    };\n\n    _this.renderControl = function (filter) {\n      if (filter === void 0) {\n        filter = function filter(_a) {\n          var control = _a.control,\n              controlProp = _a.controlProp;\n          return true;\n        };\n      }\n\n      return _this.state.isReady && _this.state.googleChartControls !== null ? createElement(Fragment, null, _this.state.googleChartControls.filter(function (_a) {\n        var controlProp = _a.controlProp,\n            control = _a.control;\n        return filter({\n          control: control,\n          controlProp: controlProp\n        });\n      }).map(function (_a) {\n        var control = _a.control,\n            controlProp = _a.controlProp;\n        return createElement(\"div\", {\n          key: control.getContainerId(),\n          id: control.getContainerId()\n        });\n      })) : null;\n    };\n\n    _this.renderToolBar = function () {\n      if (_this.props.toolbarItems === null) return null;\n      return createElement(\"div\", {\n        ref: _this.toolbar_ref\n      });\n    };\n\n    return _this;\n  }\n\n  GoogleChart.prototype.componentDidMount = function () {\n    var _a = this.props,\n        options = _a.options,\n        google = _a.google,\n        chartType = _a.chartType,\n        chartWrapperParams = _a.chartWrapperParams,\n        toolbarItems = _a.toolbarItems,\n        getChartEditor = _a.getChartEditor,\n        getChartWrapper = _a.getChartWrapper;\n\n    var chartConfig = _assign({\n      chartType: chartType,\n      options: options,\n      containerId: this.getGraphID()\n    }, chartWrapperParams);\n\n    var googleChartWrapper = new google.visualization.ChartWrapper(chartConfig);\n    googleChartWrapper.setOptions(options);\n    getChartWrapper(googleChartWrapper, google);\n    var googleChartDashboard = new google.visualization.Dashboard(this.dashboard_ref);\n    var googleChartControls = this.addControls(googleChartWrapper, googleChartDashboard);\n\n    if (toolbarItems !== null) {\n      google.visualization.drawToolbar(this.toolbar_ref.current, toolbarItems);\n    }\n\n    var googleChartEditor = null;\n\n    if (getChartEditor !== null) {\n      googleChartEditor = new google.visualization.ChartEditor();\n      getChartEditor({\n        chartEditor: googleChartEditor,\n        chartWrapper: googleChartWrapper,\n        google: google\n      });\n    }\n\n    this.setState({\n      googleChartEditor: googleChartEditor,\n      googleChartControls: googleChartControls,\n      googleChartDashboard: googleChartDashboard,\n      googleChartWrapper: googleChartWrapper,\n      isReady: true\n    });\n  };\n\n  GoogleChart.prototype.componentDidUpdate = function () {\n    if (this.state.googleChartWrapper === null) return;\n    if (this.state.googleChartDashboard === null) return;\n    if (this.state.googleChartControls === null) return;\n    var controls = this.props.controls;\n\n    for (var i = 0; i < controls.length; i += 1) {\n      var _a = controls[i],\n          controlType = _a.controlType,\n          options = _a.options,\n          controlWrapperParams = _a.controlWrapperParams;\n\n      if (controlWrapperParams && \"state\" in controlWrapperParams) {\n        this.state.googleChartControls[i].control.setState(controlWrapperParams[\"state\"]);\n      }\n\n      this.state.googleChartControls[i].control.setOptions(options);\n      this.state.googleChartControls[i].control.setControlType(controlType);\n    }\n  };\n\n  GoogleChart.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    return this.state.isReady !== nextState.isReady || nextProps.controls !== this.props.controls;\n  };\n\n  GoogleChart.prototype.render = function () {\n    var _a = this.props,\n        width = _a.width,\n        height = _a.height,\n        options = _a.options,\n        style = _a.style;\n\n    var divStyle = _assign({\n      height: height || options && options.height,\n      width: width || options && options.width\n    }, style);\n\n    if (this.props.render !== null) {\n      return createElement(\"div\", {\n        ref: this.dashboard_ref,\n        style: divStyle\n      }, createElement(\"div\", {\n        ref: this.toolbar_ref,\n        id: \"toolbar\"\n      }), this.props.render({\n        renderChart: this.renderChart,\n        renderControl: this.renderControl,\n        renderToolbar: this.renderToolBar\n      }));\n    } else {\n      return createElement(\"div\", {\n        ref: this.dashboard_ref,\n        style: divStyle\n      }, this.renderControl(function (_a) {\n        var controlProp = _a.controlProp;\n        return controlProp.controlPosition !== \"bottom\";\n      }), this.renderChart(), this.renderControl(function (_a) {\n        var controlProp = _a.controlProp;\n        return controlProp.controlPosition === \"bottom\";\n      }), this.renderToolBar());\n    }\n  };\n\n  return GoogleChart;\n}(Component);\n\nvar Chart = function (_super) {\n  __extends(Chart, _super);\n\n  function Chart() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._isMounted = false;\n    _this.state = {\n      loadingStatus: \"loading\",\n      google: null\n    };\n\n    _this.onLoad = function (google) {\n      if (_this.isFullyLoaded(google)) {\n        _this.onSuccess(google);\n      } else {\n        var id_1 = setInterval(function () {\n          var google = window.google;\n\n          if (_this._isMounted) {\n            if (google && _this.isFullyLoaded(google)) {\n              clearInterval(id_1);\n\n              _this.onSuccess(google);\n            }\n          } else {\n            clearInterval(id_1);\n          }\n        }, 1000);\n      }\n    };\n\n    _this.onSuccess = function (google) {\n      _this.setState({\n        loadingStatus: \"ready\",\n        google: google\n      });\n    };\n\n    _this.onError = function () {\n      _this.setState({\n        loadingStatus: \"errored\"\n      });\n    };\n\n    return _this;\n  }\n\n  Chart.prototype.render = function () {\n    var _a = this.props,\n        chartLanguage = _a.chartLanguage,\n        chartPackages = _a.chartPackages,\n        chartVersion = _a.chartVersion,\n        mapsApiKey = _a.mapsApiKey,\n        loader = _a.loader,\n        errorElement = _a.errorElement;\n    return createElement(ContextProvider, {\n      value: this.props\n    }, this.state.loadingStatus === \"ready\" && this.state.google !== null ? createElement(GoogleChart, _assign({}, this.props, {\n      google: this.state.google\n    })) : this.state.loadingStatus === \"errored\" && errorElement ? errorElement : loader, createElement(GoogleChartLoader, _assign({}, {\n      chartLanguage: chartLanguage,\n      chartPackages: chartPackages,\n      chartVersion: chartVersion,\n      mapsApiKey: mapsApiKey\n    }, {\n      onLoad: this.onLoad,\n      onError: this.onError\n    })));\n  };\n\n  Chart.prototype.componentDidMount = function () {\n    this._isMounted = true;\n  };\n\n  Chart.prototype.componentWillUnmount = function () {\n    this._isMounted = false;\n  };\n\n  Chart.prototype.isFullyLoaded = function (google) {\n    var _a = this.props,\n        controls = _a.controls,\n        toolbarItems = _a.toolbarItems,\n        getChartEditor = _a.getChartEditor;\n    return google && google.visualization && google.visualization.ChartWrapper && google.visualization.Dashboard && (!controls || google.visualization.ChartWrapper) && (!getChartEditor || google.visualization.ChartEditor) && (!toolbarItems || google.visualization.drawToolbar);\n  };\n\n  Chart.defaultProps = chartDefaultProps;\n  return Chart;\n}(Component);\n\nexport default Chart;\nexport { Chart };","import React, { useEffect, useRef, useState } from 'react'\nimport AssetList from './components/AssetList'\nimport Matrix from './components/Matrix'\nimport Result from './components/Result'\nimport PortfolioAllocation from 'portfolio-allocation'\nimport Chart from 'react-google-charts'\nfunction correlation(x, y) {\n  const xMean = x.reduce((acc, el) => el + acc, 0) / x.length\n  const yMean = y.reduce((acc, el) => el + acc, 0) / y.length\n  if (x.length !== y.length) return null\n  let numerator = 0,\n    xDSquaredSum = 0,\n    yDSquaredSum = 0\n\n  for (let i = 0; i < x.length; i++) {\n    const xd = x[i] - xMean\n    const yd = y[i] - yMean\n    numerator += xd * yd\n    xDSquaredSum += xd ** 2\n    yDSquaredSum += yd ** 2\n  }\n  return numerator / (xDSquaredSum * yDSquaredSum) ** 0.5\n}\n\nfunction covariancesFromCorrelations(correlations, stdevs) {\n  return Object.keys(correlations).reduce(\n    (acc, row) => ({\n      ...acc,\n      [row]: Object.keys(correlations[row]).reduce(\n        (acc, col) => ({\n          ...acc,\n          [col]: correlations[row][col] * stdevs[row] * stdevs[col],\n        }),\n        {}\n      ),\n    }),\n    {}\n  )\n}\n\nexport default function Home() {\n  const [assets, setAssets] = useState([])\n  const [correlations, setCorrelations] = useState({})\n  const [covariances, setCovariances] = useState({})\n  const [data, setData] = useState([])\n  const [weights, setWeights] = useState([])\n  const [currentWeight, setCurrentWeight] = useState([])\n\n  useEffect(() => {\n    const newCorrelations = {}\n    for (let i = 0; i < assets.length; i++) {\n      for (let j = 0; j < assets.length; j++) {\n        if (typeof newCorrelations[assets[i].symbol] === 'undefined') {\n          newCorrelations[assets[i].symbol] = {}\n        }\n        newCorrelations[assets[i].symbol][assets[j].symbol] = correlation(\n          assets[i].returns,\n          assets[j].returns\n        )\n      }\n    }\n    setCorrelations(newCorrelations)\n    const stdevs = assets.reduce(\n      (acc, asset) => ({ ...acc, [asset.symbol]: asset.stdev }),\n      {}\n    )\n    const newCovariances = covariancesFromCorrelations(newCorrelations, stdevs)\n    setCovariances(newCovariances)\n    if (assets.length > 0) {\n      const arCovars = Object.keys(newCovariances).map(k =>\n        Object.keys(newCovariances[k]).map(k2 => newCovariances[k][k2])\n      )\n      const meanReturns = assets.map(\n        a =>\n          (1 + a.returns.reduce((acc, r) => acc + r, 0) / a.returns.length) **\n            30 -\n          1\n      )\n      const portfolio = PortfolioAllocation.meanVarianceEfficientFrontierPortfolios(\n        meanReturns,\n        arCovars\n      )\n      const coords = []\n      const weights = []\n      portfolio.forEach(p => {\n        weights.push(p[0])\n        coords.push([p[2], p[1]])\n      })\n      setData(coords)\n      setWeights(weights)\n    }\n  }, [assets.length, assets])\n\n  return (\n    <div>\n      <a href=\"https://vargas.dev\">vargas.dev</a>\n      <h1>Markowitz calculator</h1>\n      <h4>\n        {' '}\n        Powered by <a href=\"https://oplab.com.br\">OpLab</a>\n      </h4>\n      <h2>Asset List</h2>\n      <AssetList\n        onAdd={asset => {\n          let found = false\n          const newAssets = [...assets]\n          for (let i = 0; i < newAssets.length; i++) {\n            if (newAssets[i].symbol === asset.symbol) {\n              found = true\n              newAssets[i] = asset\n              break\n            }\n          }\n          setAssets(found ? newAssets : [...assets, asset])\n        }}\n        onRemove={asset =>\n          setAssets(assets.filter(a => a.symbol !== asset.symbol))\n        }\n        assets={assets}\n      />\n      <h2>Correlations</h2>\n      <Matrix data={correlations} />\n      <h2>Covariations</h2>\n      <Matrix data={covariances} />\n      <Result assets={assets} covariances={covariances} />\n      <h2>Efficient frontier</h2>\n      {assets.length > 1 ? (\n        <div>\n          <ul>\n            {assets.map(({ symbol }, i) => (\n              <li>\n                {symbol} - {currentWeight[i]}\n              </li>\n            ))}\n          </ul>\n          <Chart\n            width={'100%'}\n            height={'800px'}\n            chartType=\"AreaChart\"\n            loader={<div>Loading...</div>}\n            chartEvents={[\n              {\n                eventName: 'select',\n                callback: ({ chartWrapper }) => {\n                  const chart = chartWrapper.getChart()\n                  const selection = chart.getSelection()\n                  if (selection.length === 1) {\n                    const [selectedItem] = selection\n                    const { row } = selectedItem\n                    setCurrentWeight(weights[row])\n                  }\n                },\n              },\n            ]}\n            data={[\n              ['Risk', 'Return'],\n              ...data.map(coord => [coord[0] * 100, coord[1] * 100]),\n            ]}\n            options={{\n              hAxis: {\n                title: 'Risk (%)',\n              },\n              vAxis: {\n                title: 'Return (%)',\n              },\n            }}\n          />\n        </div>\n      ) : null}\n    </div>\n  )\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Script = function (_React$Component) {\n  _inherits(Script, _React$Component); // A dictionary mapping script URL to a boolean value indicating if the script\n  // has failed to load.\n  // A dictionary mapping script URLs to a dictionary mapping\n  // component key to component for all components that are waiting\n  // for the script to load.\n\n\n  function Script(props) {\n    _classCallCheck(this, Script);\n\n    var _this = _possibleConstructorReturn(this, (Script.__proto__ || Object.getPrototypeOf(Script)).call(this, props));\n\n    _this.scriptLoaderId = 'id' + _this.constructor.idCount++; // eslint-disable-line space-unary-ops, no-plusplus\n\n    return _this;\n  } // A counter used to generate a unique id for each component that uses\n  // ScriptLoaderMixin.\n  // A dictionary mapping script URL to a boolean value indicating if the script\n  // has already been loaded.\n\n\n  _createClass(Script, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          onError = _props.onError,\n          onLoad = _props.onLoad,\n          url = _props.url;\n\n      if (this.constructor.loadedScripts[url]) {\n        onLoad();\n        return;\n      }\n\n      if (this.constructor.erroredScripts[url]) {\n        onError();\n        return;\n      } // If the script is loading, add the component to the script's observers\n      // and return. Otherwise, initialize the script's observers with the component\n      // and start loading the script.\n\n\n      if (this.constructor.scriptObservers[url]) {\n        this.constructor.scriptObservers[url][this.scriptLoaderId] = this.props;\n        return;\n      }\n\n      this.constructor.scriptObservers[url] = _defineProperty({}, this.scriptLoaderId, this.props);\n      this.createScript();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var url = this.props.url;\n      var observers = this.constructor.scriptObservers[url]; // If the component is waiting for the script to load, remove the\n      // component from the script's observers before unmounting the component.\n\n      if (observers) {\n        delete observers[this.scriptLoaderId];\n      }\n    }\n  }, {\n    key: 'createScript',\n    value: function createScript() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          onCreate = _props2.onCreate,\n          url = _props2.url,\n          attributes = _props2.attributes;\n      var script = document.createElement('script');\n      onCreate(); // add 'data-' or non standard attributes to the script tag\n\n      if (attributes) {\n        Object.keys(attributes).forEach(function (prop) {\n          return script.setAttribute(prop, attributes[prop]);\n        });\n      }\n\n      script.src = url; // default async to true if not set with custom attributes\n\n      if (!script.hasAttribute('async')) {\n        script.async = 1;\n      }\n\n      var callObserverFuncAndRemoveObserver = function callObserverFuncAndRemoveObserver(shouldRemoveObserver) {\n        var observers = _this2.constructor.scriptObservers[url];\n        Object.keys(observers).forEach(function (key) {\n          if (shouldRemoveObserver(observers[key])) {\n            delete _this2.constructor.scriptObservers[url][_this2.scriptLoaderId];\n          }\n        });\n      };\n\n      script.onload = function () {\n        _this2.constructor.loadedScripts[url] = true;\n        callObserverFuncAndRemoveObserver(function (observer) {\n          observer.onLoad();\n          return true;\n        });\n      };\n\n      script.onerror = function () {\n        _this2.constructor.erroredScripts[url] = true;\n        callObserverFuncAndRemoveObserver(function (observer) {\n          observer.onError();\n          return true;\n        });\n      };\n\n      document.body.appendChild(script);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Script;\n}(_react2.default.Component);\n\nScript.propTypes = {\n  attributes: _propTypes.PropTypes.object,\n  // eslint-disable-line react/forbid-prop-types\n  onCreate: _propTypes.PropTypes.func,\n  onError: _propTypes.PropTypes.func.isRequired,\n  onLoad: _propTypes.PropTypes.func.isRequired,\n  url: _propTypes.PropTypes.string.isRequired\n};\nScript.defaultProps = {\n  attributes: {},\n  onCreate: function onCreate() {},\n  onError: function onError() {},\n  onLoad: function onLoad() {}\n};\nScript.scriptObservers = {};\nScript.loadedScripts = {};\nScript.erroredScripts = {};\nScript.idCount = 0;\nexports.default = Script;\nmodule.exports = exports['default'];","import React, { useEffect, useState } from 'react'\nconst decimalFormatter = Intl.NumberFormat('pt-BR', {\n  maximumFractionDigits: 2,\n  minimumFractionDigits: 2,\n})\nexport default function Result({ assets, covariances }) {\n  const [risk, setRisk] = useState(0)\n  useEffect(() => {\n    if (assets.length > 1) {\n      const total = assets.reduce(\n        (acc, { amount, close }) => acc + amount * close,\n        0\n      )\n      const w = assets.map(({ amount, close }) => (amount * close) / total)\n      const Î© = Object.keys(covariances).map(k =>\n        Object.keys(covariances[k]).map(l => covariances[k][l])\n      )\n\n      let r = 0\n      for (let i = 0; i < w.length; i++) {\n        let sum = 0\n        for (let j = 0; j < w.length; j++) {\n          sum += Î©[i][j] * w[j]\n        }\n        r += sum * w[i]\n      }\n      setRisk(r ** 0.5)\n    } else setRisk(assets[0] ? assets[0].stdev : 0)\n  }, [covariances])\n  return (\n    <div>\n      <h2>Portfolio Risk</h2>\n      <p>Ïâ={decimalFormatter.format(risk * 100)}%</p>\n    </div>\n  )\n}\n"],"sourceRoot":""}